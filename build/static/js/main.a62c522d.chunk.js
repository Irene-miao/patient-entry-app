(this.webpackJsonppatientor=this.webpackJsonppatientor||[]).push([[0],{201:function(e,t,a){"use strict";a.r(t);var n,c,r=a(0),i=a.n(r),l=a(64),o=a.n(l),s=(a(174),a(37)),d=a.n(s),j=a(65),b=a(21),h=a(58),u=a.n(h),p=a(85),O=a(10),x=a(212),m=a(224),v=a(219),f=a(213),g="/api/patients",y=a(69),k=a(12),C=function(e){return{type:"ADD_PATIENT",payload:e}},S=function(e){return console.log(e),{type:"ADD_ENTRY",payload:e}},w=function(e){return console.log(e),{type:"REMOVE_PATIENT",payload:e}},D=a(2),N={patients:{},diagnoses:{}},T=Object(r.createContext)([N,function(){return N}]),E=function(e){var t=e.reducer,a=e.children,n=Object(r.useReducer)(t,N),c=Object(b.a)(n,2),i=c[0],l=c[1];return Object(D.jsx)(T.Provider,{value:[i,l],children:a})},H=function(){return Object(r.useContext)(T)},A=a(217),R=a(216),I=a(222),L=a(221),_=a(11),F=a(215),P=(a(214),function(e){var t=e.name,a=e.label,n=e.options;return Object(D.jsxs)(F.a.Field,{children:[Object(D.jsx)("label",{children:a}),Object(D.jsx)(_.b,{as:"select",name:t,className:"ui dropdown",children:n.map((function(e){return Object(D.jsx)("option",{value:e.value,children:e.label||e.value},e.value)}))})]})}),B=function(e){var t=e.name,a=e.label,n=e.options;return Object(D.jsxs)(F.a.Field,{children:[Object(D.jsx)("label",{children:a}),Object(D.jsx)(_.b,{as:"select",name:t,className:"ui dropdown",children:n.map((function(e){return Object(D.jsx)("option",{value:e.value,children:e.label||e.value},e.value)}))})]})},M=function(e){var t=e.field,a=e.label,n=e.placeholder;return Object(D.jsxs)(F.a.Field,{children:[Object(D.jsx)("label",{children:a}),Object(D.jsx)(_.b,Object(k.a)({placeholder:n},t)),Object(D.jsx)("div",{style:{color:"red"},children:Object(D.jsx)(_.a,{name:t.name})})]})},U=function(e){var t=e.field,a=e.label,n=e.min,c=e.max,r=e.placeholder;return Object(D.jsxs)(F.a.Field,{children:[Object(D.jsx)("label",{children:a}),Object(D.jsx)(_.b,Object(k.a)(Object(k.a)({},t),{},{type:"number",min:n,max:c,placeholder:r})),Object(D.jsx)("div",{style:{color:"red"},children:Object(D.jsx)(_.a,{name:t.name})})]})};!function(e){e.Male="male",e.Female="female",e.Other="other"}(n||(n={})),function(e){e[e.Healthy=0]="Healthy",e[e.LowRisk=1]="LowRisk",e[e.HighRisk=2]="HighRisk",e[e.CriticalRisk=3]="CriticalRisk"}(c||(c={}));var V=[{value:n.Male,label:"Male"},{value:n.Female,label:"Female"},{value:n.Other,label:"Other"}],Y=function(e){var t=e.onSubmit,a=e.onCancel;return Object(D.jsx)(_.d,{initialValues:{name:"",ssn:"123456-123A",dateOfBirth:"",occupation:"",gender:n.Other},onSubmit:t,validate:function(e){var t="Field is required",a={};return e.name||(a.name=t),e.ssn||(a.ssn=t),e.dateOfBirth||(a.dateOfBirth=t),e.occupation||(a.occupation=t),a},children:function(e){var t=e.isValid,n=e.dirty;return Object(D.jsxs)(_.c,{className:"form ui",children:[Object(D.jsx)(_.b,{label:"Name",placeholder:"Name",name:"name",component:M}),Object(D.jsx)(_.b,{label:"Social Security Number",placeholder:"SSN",name:"ssn",component:M}),Object(D.jsx)(_.b,{label:"Date Of Birth",placeholder:"YYYY-MM-DD",name:"dateOfBirth",component:M}),Object(D.jsx)(_.b,{label:"Occupation",placeholder:"Occupation",name:"occupation",component:M}),Object(D.jsx)(P,{label:"Gender",name:"gender",options:V}),Object(D.jsxs)(L.a,{children:[Object(D.jsx)(L.a.Column,{floated:"left",width:5,children:Object(D.jsx)(v.a,{type:"button",onClick:a,color:"red",children:"Cancel"})}),Object(D.jsx)(L.a.Column,{floated:"right",width:5,children:Object(D.jsx)(v.a,{type:"submit",floated:"right",color:"green",disabled:!n||!t,children:"Add"})})]})]})}})},G=function(e){var t=e.modalOpen,a=e.onClose,n=e.onSubmit,c=e.error;return Object(D.jsxs)(R.a,{open:t,onClose:a,centered:!1,closeIcon:!0,children:[Object(D.jsx)(R.a.Header,{children:"Add a new patient"}),Object(D.jsxs)(R.a.Content,{children:[c&&Object(D.jsx)(I.a,{inverted:!0,color:"red",children:"Error: ".concat(c)}),Object(D.jsx)(Y,{onSubmit:n,onCancel:a})]})]})},z=a(223),J=["The patient is in great shape","The patient has a low risk of getting sick","The patient has a high risk of getting sick","The patient has a diagnosed condition"],q=function(e){var t=e.rating,a=e.showText;return Object(D.jsxs)("div",{className:"health-bar",children:[Object(D.jsx)(z.a,{icon:"heart",disabled:!0,rating:4-t,maxRating:4}),a?Object(D.jsx)("p",{children:J[t]}):null]})},K=function(){var e=H(),t=Object(b.a)(e,2),a=t[0].patients,n=t[1],c=i.a.useState(!1),r=Object(b.a)(c,2),l=r[0],o=r[1],s=i.a.useState(),h=Object(b.a)(s,2),O=h[0],m=h[1],f=function(){o(!1),m(void 0)},y=function(){var e=Object(j.a)(d.a.mark((function e(t){var a,c,r,i,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.post("".concat(g),t);case 3:a=e.sent,c=a.data,n(C(c)),f(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error((null===(r=e.t0.response)||void 0===r?void 0:r.data)||"Unknown Error"),m((null===(i=e.t0.response)||void 0===i||null===(l=i.data)||void 0===l?void 0:l.error)||"Unknown error");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(j.a)(d.a.mark((function e(t){var a,c,r,i,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.delete("".concat(g,"/").concat(t));case 3:a=e.sent,c=a.data,console.log(c),n(w(t)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error((null===(r=e.t0.response)||void 0===r?void 0:r.data)||"Unknown Error"),m((null===(i=e.t0.response)||void 0===i||null===(l=i.data)||void 0===l?void 0:l.error)||"Unknown error");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsxs)("div",{className:"App",children:[Object(D.jsx)(x.a,{textAlign:"center",children:Object(D.jsx)("h3",{children:"Patient list"})}),Object(D.jsxs)(A.a,{celled:!0,children:[Object(D.jsx)(A.a.Header,{children:Object(D.jsxs)(A.a.Row,{children:[Object(D.jsx)(A.a.HeaderCell,{children:"Name"}),Object(D.jsx)(A.a.HeaderCell,{children:"Gender"}),Object(D.jsx)(A.a.HeaderCell,{children:"Occupation"}),Object(D.jsx)(A.a.HeaderCell,{children:"Health Rating"})]})}),Object(D.jsx)(A.a.Body,{children:Object.values(a).map((function(e){return Object(D.jsxs)(A.a.Row,{children:[Object(D.jsx)(A.a.Cell,{children:Object(D.jsx)(p.b,{to:"/".concat(e.id),children:e.name})}),Object(D.jsx)(A.a.Cell,{children:e.gender}),Object(D.jsx)(A.a.Cell,{children:e.occupation}),Object(D.jsx)(A.a.Cell,{children:Object(D.jsx)(q,{showText:!1,rating:1})}),Object(D.jsx)(A.a.Cell,{children:Object(D.jsx)(v.a,{onClick:function(){return k(e.id)},children:"Delete Patient"})})]},e.id)}))})]}),Object(D.jsx)(G,{modalOpen:l,onSubmit:y,error:O,onClose:f}),Object(D.jsx)(v.a,{onClick:function(){return o(!0)},children:"Add New Patient"})]})},Q=a(93),W=a(218),X=function(e){return console.log(e.health),e.health?Object(D.jsx)("div",{children:Object(D.jsxs)(W.a,{fluid:!0,centered:!0,style:{padding:10,margin:10},children:[Object(D.jsxs)("p",{children:[e.health.date," ",Object(D.jsx)(Q.a,{fitted:!0,name:"doctor",size:"huge"}),e.health.specialist]}),Object(D.jsx)("p",{children:e.health.description}),Object(D.jsx)("p",{children:e.health.healthCheckRating<2?Object(D.jsx)(Q.a,{color:"red",fitted:!0,name:"heart"}):Object(D.jsx)(Q.a,{color:"yellow",fitted:!0,name:"heart"})})]})}):null},Z=function(e){return console.log(e.hospital),e.hospital?Object(D.jsx)("div",{children:Object(D.jsxs)(W.a,{fluid:!0,centered:!0,style:{padding:10,margin:10},children:[Object(D.jsxs)("p",{children:[e.hospital.date," ",Object(D.jsx)(Q.a,{fitted:!0,name:"doctor",size:"huge"}),e.hospital.specialist]}),Object(D.jsx)("p",{children:e.hospital.description}),Object(D.jsx)("p",{children:Object.values(e.hospital.discharge).join("  discharged:   ")})]})}):null},$=function(e){return console.log(e.occupational),e.occupational?Object(D.jsx)("div",{children:Object(D.jsxs)(W.a,{fluid:!0,centered:!0,style:{padding:10,margin:10},children:[Object(D.jsxs)("p",{children:[e.occupational.date," ",Object(D.jsx)(Q.a,{fitted:!0,name:"stethoscope",size:"huge"})," ",e.occupational.specialist]}),Object(D.jsx)("p",{children:e.occupational.description}),Object(D.jsx)("p",{children:e.occupational.employerName}),e.occupational.sickLeave?Object(D.jsxs)("p",{children:["Start: ",e.occupational.sickLeave.startDate,Object(D.jsx)("br",{}),"End: ",e.occupational.sickLeave.endDate]}):null]})}):null},ee=[{value:"HealthCheck",label:"HealthCheck"},{value:"Hospital",label:"Hospital"},{value:"OccupationalHealthcare",label:"OccupationalHealthcare"}],te=function(e){return 0===e.length||Boolean(Date.parse(e))},ae=function(e){var t=e.onSubmit,a=e.onCancel,n=(new Date).toISOString().split("T")[0];return Object(D.jsx)(_.d,{initialValues:{date:"".concat(n),specialist:"",description:"",type:"",healthCheckRating:0,discharge:{date:"",criteria:""},sickLeave:{startDate:"",endDate:""},employerName:""},onSubmit:t,validate:function(e){var t="Field is required",a="Malformatted date",n={};if(e.date||(n.date=t),e.date&&!te(e.date)&&(n.date=a),e.specialist&&0!==e.specialist.length||(n.specialist=t),e.description&&0!==e.description.length||(n.description=t),"HealthCheck"===e.type){var c=e.healthCheckRating;c||(n.healthCheckRating=t),[0,1,2,3].includes(c)||(n.healthCheckRating="value must be 0-3")}if("Hospital"===e.type){var r=e.discharge;r&&!te(r.date)&&(n.discharge=a)}if("OccupationalHealthcare"===e.type){var i=e.sickLeave;!i||te(i.startDate)&&te(i.endDate)||(n.sickLeave=a)}return n},children:function(e){var t=e.isValid,n=e.dirty,c=e.values,r=e.errors;return Object(D.jsxs)(_.c,{className:"form ui",children:[Object(D.jsx)(B,{label:"Type",name:"type",options:ee}),Object(D.jsx)(_.b,{label:"Date",placeholder:"Date",name:"date",component:M}),Object(D.jsx)(_.b,{label:"Specialist",placeholder:"Specialist",name:"specialist",component:M}),Object(D.jsx)(_.b,{label:"Description",placeholder:"Description",name:"description",component:M}),"HealthCheck"===c.type&&Object(D.jsx)(D.Fragment,{children:Object(D.jsx)(_.b,{label:"Rating",placeholder:"0",name:"healthCheckRating",component:U,min:0,max:3})}),"Hospital"===c.type&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(_.b,{label:"Discharge Date",placeholder:"Discharge Date",name:"discharge.date",component:M}),Object(D.jsx)("div",{style:{color:"red",marginBottom:5},children:r.discharge}),Object(D.jsx)(_.b,{label:"Discharge Criteria",placeholder:"Discharge Criteria",name:"discharge.criteria",component:M})]}),"OccupationalHealthcare"===c.type&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(_.b,{label:"Employer Name",placeholder:"Employer Name",name:"employerName",component:M}),Object(D.jsx)("div",{style:{color:"red",marginBottom:5},children:r.sickLeave}),Object(D.jsx)(_.b,{label:"Sick leave start date",placeholder:"Sick leave start date",name:"sickLeave.startDate",component:M}),Object(D.jsx)(_.b,{label:"Sick leave end date",placeholder:"Sick leave end date",name:"sickLeave.endDate",component:M})]}),Object(D.jsxs)(L.a,{children:[Object(D.jsx)(L.a.Column,{floated:"left",width:5,children:Object(D.jsx)(v.a,{type:"button",onClick:a,color:"red",children:"Cancel"})}),Object(D.jsx)(L.a.Column,{floated:"right",width:5,children:Object(D.jsx)(v.a,{type:"submit",floated:"right",color:"green",disabled:!n||!t,children:"Add"})})]})]})}})},ne=function(e){var t=e.modalOpen,a=e.onClose,n=e.onSubmit,c=e.error;return Object(D.jsxs)(R.a,{open:t,onClose:a,centered:!1,closeIcon:!0,children:[Object(D.jsx)(R.a.Header,{children:"Add a new entry"}),Object(D.jsxs)(R.a.Content,{children:[c&&Object(D.jsx)(I.a,{inverted:!0,color:"red",children:"Error: ".concat(c)}),Object(D.jsx)(ae,{onSubmit:n,onCancel:a})]})]})},ce=function(){var e=H(),t=Object(b.a)(e,2),a=t[0],n=a.patients,c=a.diagnoses,r=t[1],l=Object(O.g)().id;console.log(n),console.log(c);var o=i.a.useState(!1),s=Object(b.a)(o,2),h=s[0],p=s[1],x=i.a.useState(),m=Object(b.a)(x,2),f=m[0],y=m[1],k=function(){p(!1),y(void 0)},C=function(e){console.log(e),Object.values(n).map(function(){var t=Object(j.a)(d.a.mark((function t(a){var n,c,i,o,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.id!==l){t.next=17;break}return t.prev=1,t.next=4,u.a.post("".concat(g,"/").concat(l,"/entries"),e);case 4:n=t.sent,c=n.data,console.log(c),i=a.entries.concat(c),console.log(i),r(S(a)),k(),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),console.error((null===(o=t.t0.response)||void 0===o?void 0:o.data)||"Unknown Error"),y((null===(s=t.t0.response)||void 0===s?void 0:s.data)||"Unknown Error");case 17:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}())},w=function(e){var t=e.entry;switch(console.log(t),t.type){case"Hospital":return Object(D.jsx)(Z,{hospital:t});case"OccupationalHealthcare":return Object(D.jsx)($,{occupational:t});case"HealthCheck":return Object(D.jsx)(X,{health:t});default:return function(e){throw new Error("Unhandled discriminated union member: ".concat(JSON.stringify(e)))}(t)}};return Object(D.jsx)("div",{children:Object.values(n).map((function(e){var t;return e.id===l?Object(D.jsxs)("div",{children:[Object(D.jsxs)("h1",{children:[e.name,"  ","male"===e.gender?Object(D.jsx)(Q.a,{fitted:!0,name:"mars"}):Object(D.jsx)(Q.a,{fitted:!0,name:"venus"})]}),Object(D.jsxs)("p",{children:["ssn: ",e.ssn]}),Object(D.jsxs)("p",{children:["occupation: ",e.occupation]}),Object(D.jsx)("h3",{children:"entries"}),Object(D.jsxs)("div",{children:[Object(D.jsx)(ne,{modalOpen:h,onSubmit:C,error:f,onClose:k}),Object(D.jsx)(v.a,{onClick:function(){return p(!0)},children:"Add New Entry"})]}),Object(D.jsx)("div",{children:null===(t=Object.values(e.entries))||void 0===t?void 0:t.map((function(e){return console.log(e),w({entry:e})}))})]},e.id):null}))})},re=function(){var e=H(),t=Object(b.a)(e,2)[1];return i.a.useEffect((function(){var e=function(){var e=Object(j.a)(d.a.mark((function e(){var a,n,c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get("".concat(g));case 3:return a=e.sent,n=a.data,t({type:"SET_PATIENT_LIST",payload:n}),e.next=8,u.a.get("".concat("/api/diagnoses"));case 8:c=e.sent,r=c.data,t({type:"SET_DIAGNOSIS_LIST",payload:r}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();e()}),[t]),Object(D.jsx)("div",{className:"App",children:Object(D.jsx)(p.a,{children:Object(D.jsxs)(x.a,{children:[Object(D.jsx)(m.a,{as:"h1",children:"Patientor"}),Object(D.jsx)(v.a,{as:p.b,to:"/",primary:!0,children:"Home"}),Object(D.jsx)(f.a,{hidden:!0}),Object(D.jsxs)(O.c,{children:[Object(D.jsx)(O.a,{path:"/",element:Object(D.jsx)(K,{})}),Object(D.jsx)(O.a,{path:"/:id",element:Object(D.jsx)(ce,{})})]})]})})})};o.a.render(Object(D.jsx)(E,{reducer:function(e,t){switch(console.log("State: ",e),console.log("Action: ",t),t.type){case"SET_PATIENT_LIST":return Object(k.a)(Object(k.a)({},e),{},{patients:Object(k.a)(Object(k.a)({},t.payload.reduce((function(e,t){return Object(k.a)(Object(k.a)({},e),{},Object(y.a)({},t.id,t))}),{})),e.patients)});case"ADD_PATIENT":return Object(k.a)(Object(k.a)({},e),{},{patients:Object(k.a)(Object(k.a)({},e.patients),{},Object(y.a)({},t.payload.id,t.payload))});case"REMOVE_PATIENT":return delete e.patients[t.payload],Object(k.a)(Object(k.a)({},e),{},{patients:e.patients});case"ADD_ENTRY":return Object(k.a)(Object(k.a)({},e),{},{patients:Object(k.a)(Object(k.a)({},e.patients),{},Object(y.a)({},t.payload.id,e.patients[t.payload.id]=t.payload))});case"SET_DIAGNOSIS_LIST":return Object(k.a)(Object(k.a)({},e),{},{diagnoses:Object(k.a)(Object(k.a)({},t.payload.reduce((function(e,t){return Object(k.a)(Object(k.a)({},e),{},Object(y.a)({},t.code,t))}),{})),e.diagnoses)});default:return e}},children:Object(D.jsx)(re,{})}),document.getElementById("root"))}},[[201,1,2]]]);
//# sourceMappingURL=main.a62c522d.chunk.js.map